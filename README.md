# VKhidden

Используйте ВКонтакте - приватно

## Функционал

- Работает, используя VK Token
- Возможность читать и отправлять сообщения
- Возможность шифровать и расшифровывать сообщения ВК
- Передача ключа шифрования напрямую между двумя хостами, без посреднических звеньев

## Как использовать

- Сохраните проект к себе на машину
- На используемой машине, должен быть установлен python 3.9+
- Установите зависимости

`pip install -r requirements.txt`
- Выполните команду, из папки с программой
`uvicorn app:app --reload --port 8080`
- после этого, перейдите в браузере по адрессу `http://localhost:8080`
- **По необходимости, порт можно изменить, для этого необходимо в команде запуска асинхронного сервера, изменить порт на соответствующий, а также открыть файл по пути ./js/main.js, и изменить строку `const PORT = <нужный вам порт>`**

- **Если используйте docker-контейнер, то для изменения порта, необходимо зайти в файл `Dockerfile` и изменить там переменную `ENV CPORT=<нужный вам порт>`**
- Собрать докер контейнер командой `docker build -t <имя образа> .`. Запустить контейнер `docker run -v абсолютный/путь/до/папки/с/ключем/шифрования/на/хосте:абсолютный/путь/до/папки/с/ключем/шифрования/в/контейнере -v абсолютный/путь/до/папки/с/бд/токенов/на/хосте:абсолютный/путь/до/папки/с/бд/токенов/в/контейнере -p <портХоста>:<портКонтейнера> <имя образа>`

- Для передачи ключа шифрования, его нужно сначала создать, если его нет (залогиниться и нажать кнопку `создать ключ шифрования`).
1. В командной строке хоста выполнить команду `ssh -R 80:localhost:8080 nokey@localhost.run` где 80 это порт, на который запросы будут приходить из вне, 8080, это порт который вы указываете при запуске асинхронного сервера с приложением.
2. В потоке вывода терминала, будет выдан туннель вида `https://df6gshdf778321.lhr.life`, который вы передадите человеку, которому необходимо передать ключ
3. Человек(далее гость), перейдя по ссылке этого туннеля, должен добавить путь к выданному домену вида `get_secret_key_login`, или полностью `https://df6gshdf778321.lhr.life/get_secret_key_login`.
4. После переадресации, гостю будет предложено ввести его логин, как только он его введет, он будет на ожидании, пока вы, ему не откроете доступ.
5. Для этого, вам необходимо перейти по адрессу `http://localhost:8080/set_up_access` - где в предложенной таблице, разрешить доступ, нужному гостю.
6. После этого, гостю нужно обновить страницу, или снова перейти по адрессу, пункта, и ему будет доступен ключ, который он может заменить в файле ключа (/keys/secret.key) и пользоваться им.
